# 2016.07.16：搭建Git服务器

## 前言

接触Github之后，终于体会到了Git的强大之处，加之Android Studio对Git的支持远远好于SVN，所以一直想让公司自建一个Git服务器，但是无奈后台同事并不感冒（SVN用的好好的，干嘛要换，还要我去学者弄，不相干。。。），只好自己想办法。

因为公司项目不能开源，所以不能直接在Github上建仓库，于是把目光转向Google Cloud（可以免费建代码库，使用Git，目前提供5G的空间）。结果折腾一天，Google Cloud SDK完全不能用，原因是在sock5代理下有bug会崩溃，不挂代理又不能访问，真是坑。（见[使用Google Cloud搭建git仓库遇到的坑]()）

后来一想，我干嘛不自己搭建个Git服务器呢，正好手里有个扶梯子的VPS闲着，说干就干。

### 1.服务端安装最新版Git

我的VPS系统是Ubuntu15.04，可以直接使用apt安装。

```
// 添加apt依赖仓库，以便安装最新版，否则在Ubuntu15.04下，Git镜像版本是2.1.4
$ sudo add-apt-repository ppa:git-core/ppa
// 升级镜像（貌似叫镜像）
$ sudo apt-get update
// 安装Git
$ sudo apt-get install git
```

PS：add-apt-repository命令有可能报“sudo: add-apt-repository: command not found”的error，需要先键入如下命令。

```
sudo apt-get install software-properties-common python-software-properties
```

然后再尝试添加ppa仓库及安装。如果已经安装了Git，可以在添加好ppa仓库的情况下，使用如下命令进行升级。

```
sudo apt-get dist-upgrade
```

### 2.新建Git服务器使用的用户

```
// 添加Git用户
sudo apt-get adduser -d /home/git -m git
// 设计密码
sudo apt-get passwd git
```

### 3. 

> 转载请注明出处：[搭建Git服务器]()
